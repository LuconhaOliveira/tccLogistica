<!-- Componente do header, para deixar padronizado em todas as páginas -->
{% extends "header_head.html" %}

<!-- O título da página se ajusta de acordo com o produto selecionado -->
{% block titulo %}{{nome_produto}}{% endblock %}

{% block estilos %}
<!-- link css -->
<link rel="stylesheet" href="/static/styles/pagina_visualizar_produto.css">
<!-- link imagem -->
<link rel="icon" href="/static/img/logo-topo.png">
{% endblock %}

{% block conteudo %}

<!-- container geral / principal -->
<main class="container--main">

    <!-- Seção que engloba todo o card de visualizar produto com todas as suas informações -->
    <section class="container--card-fundo">

        <!-- card -->
        <div class="card mb-4" style="width: 1090px; min-height:550px; background-color: var(--grey-dark);">

            <div class="row g-0">

                <!-- botão pra voltar para a página principal -->
                <a href="/estante/{{produto.cod_estante}}"><span
                        class="material-symbols-outlined icone-voltar">arrow_back<span class="aviso">Voltar</span>
                    </span></a>

                <div class="col-md-0 img-produto">
                    <figure>
                        <!-- imagem do produto selecionado -->
                        {% if produto.imagem %}
                        <img src="{{ produto.imagem }}" class="img-fluid rounded-start"
                            alt="{{ produto.nome_produto }}">
                        {% else %}
                        <img src="https://portal.crea-sc.org.br/wp-content/uploads/2017/11/imagem-indisponivel-para-produtos-sem-imagem_15_5.jpg"
                            class="img-fluid rounded-start" alt="Imagem indisponível">
                        {% endif %}
                    </figure>
                </div>

                <!-- Seção que engloba apenas as informações do produto -->
                <section class="container--div-top">

                    <div class="col-md-0">

                        <div class="card-body">

                            <fieldset class="left--fieldset-left">

                                <div class="left--card-text">
                                    <!-- nome do produto -->
                                    <p class="card-text"><strong>Nome:</strong> {{ produto.nome_produto }}</p>

                                    <!-- SKU -->
                                    <p class="card-text"><strong>SKU:</strong> {{ produto.sku }}</p>

                                    <!-- quantidade de produtos existentes -->
                                    <p class="card-text"><strong>Qntd:</strong> {{ produto.quantidade }}</p>

                                    <!-- preço do produto -->
                                    <p class="card-text"><strong>R$ </strong><span id="valor"> {{ produto.valor
                                            }}</span>
                                    </p>

                                    <!-- campo de nome da estante -->
                                    <p class="card-text"><strong>Estante:</strong> {{ produto.nome_estante }}</p>

                                </div>

                            </fieldset>

                            <fieldset class="left--fieldset-right">

                                <div class="right--card-text">

                                    <!-- campo de selecionar linha da estante -->
                                    <p class="card-text"><strong>Linha:</strong> {{ produto.linha }}</p>

                                    <!-- campo de selecionar coluna da estante  -->
                                    <p class="card-text"><strong>Coluna:</strong> {{ produto.coluna }}</p>

                                    <!-- campo de categoria -->
                                    <p class="card-text"><strong>Categoria:</strong> {{ produto.nome_categoria }}</p>

                                    <!-- campo de tipos de categoria -->
                                    <p class="card-text"><strong>Tipo:</strong> {{ produto.nome_tipo }}</p>

                                    <!-- campo de seleção de caracteristicas -->
                                    <p class="card-text text-caracteristicas"><strong>Características: </strong>
                                        {% if produto.caracteristicas %}
                                        <!-- Itera sobre a lista de características -->
                                        {% for carac in produto.caracteristicas %}

                                        <span>• {{ carac.nome_caracteristica }}</span>{% if not loop.last %}{% else %}{%
                                        endif %}
                                        {% endfor %}
                                        {% else %}
                                        <span>Nenhuma.</span>
                                        {% endif %}
                                    </p>

                                </div>
                            </fieldset>
            
                        </div>

                    </div>

                </section>

                <!-- descrição -->
                <div class="container--div-descricao">

                    <span class="label-descricao"
                        style="text-align: left !important;"><strong>Descrição:</strong></span>
                    <p class="card-text descricao">{{ produto.descricao }}</p>

                </div>

                <form class="container--bottom-card" method="post" action="/post/pedido/{{produto.cod_produto}}">

                    <div class="container--left-card">
                        <button class="btn btn-primary" type="submit">Incluir no Pedido de Compra</button>

                        <!-- campo de quantidade -->
                        <div class="mb-0">
                            <!-- quantidade: backend do cadastro -->
                            <input name="cadastro-quantidade" type="number" class="form-control"
                                id="exampleInputQuantidade" min="1" value="1" placeholder="Qntd:">
                        </div>
                    </div>

                    <div class="container--right-card" style="display: flex; gap: 40px;">

                        <a href="/pagina/editar/produto/{{produto.cod_produto}}"><span
                                class="material-symbols-outlined icone-editar">edit</span> </a>

                        <a href="/post/produto/remover/{{produto.cod_produto}}"><span
                                class="material-symbols-outlined icone-delete">delete</span></a>

                    </div>

                </form>

            </div>
        </div>

    </section>

</main>

<!-- Link para importar as máscaras para VALOR -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.js"></script>

<script>
    $(document).ready(function () {
        $('#valor').mask('000.000.000,00', {
            reverse: true,
            placeholder: "0,00"
        });
    });
</script>

{% endblock %}