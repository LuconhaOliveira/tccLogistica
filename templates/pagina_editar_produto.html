{% extends "header_head.html" %}

{% block titulo %}{{produto.produto}}{% endblock %}

{% block estilos %}
    <!-- link css -->
    <link rel="stylesheet" href="/static/styles/pagina_editar_produto.css">
 {% endblock %}

{% block conteudo %}
    <!-- container geral / principal -->
    <main class="container--main">

        <div class="container--div-titulo">

            <span class="material-symbols-outlined">edit</span>
            <h1 class="h1-titulo">Editar Produto</h1>

        </div>

        <form method="POST" action="/post/editar/produto/{{produto.cod_produto}}" enctype="multipart/form-data"
            class="container--card-fundo"
            style="background-size: 100%; background-image: url(/static/img/close-up-fundo-de-madeira-com-espaco-de-copia.jpg)">

            <!-- detalhe da prateleira -->
            <div class="container--div-detalhe esquerda"
                style="background-size: 100%; background-image: url();"></div>

            <!-- card -->
            <div class="card mb-4"
                style="width: 600px; min-height:550px; background-color: var(--grey-dark);">

                <div class="row g-0">

                    <section class="container--div-top">

                        <div class="col-md-0 container--div-left">

                            <figure>
                                <!-- imagem -->
                                <img id="preview" src="data:image/jpeg;base64,{{ imagem_base64 }}"
                                    class="img-fluid rounded-start" alt="Editar a foto. Clique em cima!">

                                <!-- <figcaption class="figcaption-descricao">Para editar a foto, escolha um novo arquivo!</figcaption> -->
                            </figure>

                            <input name="cadastro-imagem" type="file" class="form-control img" id="exampleInputPhoto"
                                accept="image/*">

                        </div>

                        <div class="col-md-0 container--div-right">

                            <div class="card-body">

                                <!-- INFORMAÇÕES DO PRODUTO -->

                                <!-- campo do nome -->
                                <div class="mb-3">

                                    <!-- exemplo -->
                                    <input name="cadastro-sku" maxlength="100" class="form-control" id="exampleInputSKU"
                                        placeholder="SKU:" value="{{produto.produto}}">

                                </div>

                                <!-- SKU -->
                                <div class="mb-3">

                                    <input name="cadastro-sku" maxlength="100" class="form-control" id="exampleInputSKU"
                                        placeholder="SKU:" value="{{produto.sku}}">

                                </div>

                                <!-- campo de quantidade -->
                                <div class="mb-3">

                                    <input name="cadastro-quantidade" type="number" class="form-control"
                                        id="exampleInputQuantidade" min="0" placeholder="Quantidade:"
                                        value="{{produto.quantidade}}">
                                </div>

                                <!-- campo de valor -->
                                <div class="mb-3">

                                    <input name="cadastro-valor" class="form-control" id="exampleInputValor"
                                        placeholder="R$:" value="{{produto.valor}}">
                                </div>


                                <!-- ENDEREÇAMENTO -->

                                <!-- campo de nome da estante -->
                                <div class="mb-3">

                                    <select name="cadastro-nome-estante" class="form-select" id="nomeEstanteSelect">

                                        <option class="select-estante" disabled selected>Selecione uma Estante:</option>

                                        {% for estante in estantes %}
                                        {% if estante.estante==produto.estante %}
                                        <option value="{{estante.cod_estante}}" selected>{{estante.estante}}</option>
                                        {% else %}
                                        <option value="{{estante.cod_estante}}">{{estante.estante}}</option>
                                        {% endif %}
                                        {% endfor %}

                                    </select>

                                </div>

                                <!-- campo de selecionar coluna da estante  -->
                                <div class="mb-3">

                                    <select name="cadastro-coluna-estante" class="form-select" id="colunaEstanteSelect">

                                        <option class="select-coluna" disabled selected>Selecione uma Coluna:</option>

                                        {% for i in range(1,11) %}
                                        {% if i|string ==produto.coluna[-1] %}
                                        <option class="select-coluna" selected>{{i|string}}</option>
                                        {% else %}
                                        <option class="select-coluna">{{i|string}}</option>
                                        {% endif %}
                                        {% endfor %}

                                    </select>

                                </div>

                                <!-- campo de selecionar linha da estante -->
                                <div class="mb-3">

                                    <select name="cadastro-linha-estante" class="form-select" id="linhaEstanteSelect">

                                        <option class="select-linha" disabled selected>Selecione uma Linha:</option>

                                        {% for i in range(1,4) %}
                                        {% if i|string==produto.linha[-1] %}
                                        <option class="select-linha" selected>{{i|string}}</option>
                                        {% else %}
                                        <option class="select-linha">{{i|string}}</option>
                                        {% endif %}
                                        {% endfor %}

                                    </select>

                                </div>


                                <!-- CATEGORIAS -->

                                <!-- campo de categoria -->
                                <div class="mb-3">

                                    <select name="cadastro-categoria" class="form-select" id="categoriaSelect">

                                        <option class="select-categoria" disabled selected>Selecione uma categoria:
                                        </option>

                                        {% for categoria in categorias %}
                                        {% if categoria.nome==produto.categoria %}
                                        <option value="{{categoria.cod_categoria}}" selected>{{categoria.nome}}</option>
                                        {% else %}
                                        <option value="{{categoria.cod_categoria}}">{{categoria.nome}}</option>
                                        {% endif %}
                                        {% endfor %}

                                    </select>

                                </div>

                                <!-- campo de tipos de categoria -->
                                <div class="mb-3">

                                    <select name="cadastro-tipo" class="form-select" id="tipoSelect">

                                        <option class="select-tipo" disabled selected>Selecione um tipo:</option>

                                        {% for tipo in tipos %}
                                        {% if tipo.nome==produto.tipo %}
                                        <option value="{{tipo.cod_tipo}}" selected>{{tipo.nome}}</option>
                                        {% else %}
                                        <option value="{{tipo.cod_tipo}}">{{tipo.nome}}</option>
                                        {% endif %}
                                        {% endfor %}

                                    </select>

                                </div>

                                <!-- campo de caracteristicas -->
                                <div class="mb-3">

                                    <select name="cadastro-caracteristicas" class="form-select"
                                        id="caracteristicasSelect">

                                        <option class="select-caracteristicas" disabled selected>Selecione uma
                                            característica:</option>

                                        {% for caracteristica in caracteristicas %}
                                        {% if caracteristica.nome==produto.caracteristica %}
                                        <option value="{{caracteristica.cod_caracteristica}}" selected>
                                            {{caracteristica.nome}}</option>
                                        {% else %}
                                        <option value="{{caracteristica.cod_caracteristica}}">{{caracteristica.nome}}
                                        </option>
                                        {% endif %}
                                        {% endfor %}

                                    </select>

                                </div>

                            </div>
                        </div>

                    </section>

                    <!-- descrição -->
                    <div class="mb-3 descricao">

                        <input name="cadastro-descricao" type="text" maxlength="100" class="form-control"
                            id="exampleInputName" placeholder="Descrição:" value="{{produto.descricao}}">
                    </div>

                    <div class="container--bottom-card">

                        <a href="/pagina/editar/produto/{{cod_produto}}">
                            <button class="btn btn-primary" type="submit">Editar</button>
                        </a>

                    </div>

                </div>
            </div>

            <!-- detalhe da prateleira -->
            <div class="container--div-detalhe direita"
                style="background-size: 100%; background-image: url(/static/img/textura-de-madeira-riscado.jpg);"></div>

        </form>

    </main>

    <!-- Link para importar as máscaras para VALOR -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.js"></script>

    <script> $('#exampleInputValor').mask('000.000,00', {reverse: true});</script>

    <script>
        document.getElementById('exampleInputPhoto').addEventListener('change', function (event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const preview = document.getElementById('preview');
                    preview.src = ''
                    preview.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        });
    </script>
{% endblock %}