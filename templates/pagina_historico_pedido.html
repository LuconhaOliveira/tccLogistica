{% extends "header_head.html" %}

{% block titulo %}Histórico de Pedidos{% endblock %}

{% block estilos %}
    <!-- link css -->
    <link rel="stylesheet" href="/static/styles/pagina_historico_pedidos.css">
    <!-- link imagem -->
    <link rel="icon" href="/static/img/logo-topo.png">
{% endblock %}

{% block conteudo %}
    <!-- container geral / principal -->
    <main class="container--main">

        <div class="container--div-titulo">

            <a href="/principal"><span class="material-symbols-outlined icone-voltar">arrow_back<span class="aviso">Voltar</span>
                </span></a>

            <h1 class="h1-titulo">Histórico de Pedidos</h1>

        </div>

        <div class="mb-3 form-check">
            <a href="/post/remover/historico/pedidos"><button type="submit" class="btn btn-primary">Limpar Histórico</button></a>
        </div>

        <section class="container--card">
            {% if historico %}
            {% for pedido in historico %}
            <div class="card" style="width: 50rem;">

                <div class="card-header">

                    <div class="card--header-esquerdo">

                        <p><strong>Pedido N°{{ loop.index0+1 }}</strong></p>

                    </div>

                    <div class="card--header-direito">

                        <a href="/nota/fiscal/{{pedido.cod_historico}}"><span class="material-symbols-outlined icone-nota-fiscal">visibility</span></a>
                        <p><strong>Visualizar Nota Fiscal</strong></p>

                    </div>
                </div>

                <ul class="list-group list-group-flush">
                    {% for produto in pedido.pedido_realizado %}
                    <li class="list-group-item">{{produto.quantidade}}x {{produto.nome}}</li>
                    {% endfor %}
                    <li class="list-group-item"><strong>Total:</strong> R$ {{totais[loop.index0]}}</li>
                    <li class="list-group-item"><strong>{{pedido.data_hora}}</strong></li>
                </ul>
            </div>
            {% endfor %}

            {% else %}
                <div class="card-aviso">
                    <div class="card-body">
                        <h2 class="card-title">Histórico vazio.</h2>
                    </div>
                </div>
            {% endif %}

        </section>

    </main>

{% endblock %}